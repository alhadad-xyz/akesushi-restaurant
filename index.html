<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--=============== FAVICON ===============-->
    <link
      rel="shortcut icon"
      href="assets/img/favicon.png"
      type="image/x-icon"
    />

    <!--=============== REMIXICONS ===============-->
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <!--=============== CSS ===============-->
    <link rel="stylesheet" href="assets/css/styles.css" />

    <title>Akesushi Restaurant</title>
  </head>
  <body>
    <!--==================== HEADER ====================-->
    <header class="header" id="header">
      <nav class="nav container">
        <a href="#" class="nav__logo">
          <img src="assets/img/logo.png" alt="logo image" />
          Akesushi Restaurant
        </a>

        <div class="nav__menu" id="nav-menu">
          <ul class="nav__list">
            <li class="nav__item">
              <a href="#home" class="nav__links active-link">Home</a>
            </li>
            <li class="nav__item">
              <a href="#about" class="nav__links">About Us</a>
            </li>
            <li class="nav__item">
              <a href="#popular" class="nav__links">Popular</a>
            </li>
            <li class="nav__item">
              <a href="#recently" class="nav__links">Recently</a>
            </li>
          </ul>

          <!-- close button -->
          <div class="nav__close" id="nav-close">
            <i class="ri-close-line"></i>
          </div>

          <img
            src="assets/img/leaf-branch-4.png"
            alt="nav image"
            class="nav__img-1"
          />
          <img
            src="assets/img/leaf-branch-3.png"
            alt="nav image"
            class="nav__img-2"
          />
        </div>

        <div class="nav__buttons">
          <i class="ri-shopping-cart-line change-theme" id="cart-shop"></i>

          <!-- theme change button -->
          <i class="ri-moon-line change-theme" id="theme-button"></i>

          <!-- toggle button -->
          <div class="nav__toggle" id="nav-toggle">
            <i class="ri-apps-2-line"></i>
          </div>
        </div>
      </nav>
    </header>
    <!--==================== CART ====================-->
    <div class="cart" id="cart">
      <i class="ri-close-line cart__close" id="cart-close"></i>

      <h2 class="cart__title-center">My Cart</h2>

      <div class="cart__container" id="cart-container"></div>

      <div class="cart__prices">
        <span class="cart__prices-item" id="count"></span>
        <span class="cart__prices-total" id="sum"></span>
      </div>

      <button class="button cart__button" onclick="checkout()">Checkout</button>
    </div>
    <!--==================== MAIN ====================-->
    <main class="main">
      <!--==================== HOME ====================-->
      <section class="home section" id="home">
        <div class="home__container container grid">
          <img
            src="assets/img/home-sushi-rolls.png"
            alt="home image"
            class="home__img"
          />

          <div class="home__data">
            <h1 class="home__title">
              Enjoy Delicious

              <div>
                <img src="assets/img/home-sushi-title.png" alt="home image" />
                Sushi Food
              </div>
            </h1>

            <p class="home__description">
              Enjoy a good dinner with the best dishes in the restaurant and
              improve your day.
            </p>

            <a href="#popular" class="button">
              Order Now <i class="ri-arrow-right-line"></i>
            </a>
          </div>
        </div>

        <img
          src="assets/img/leaf-branch-2.png"
          alt="home image"
          class="home__leaf-1"
        />
        <img
          src="assets/img/leaf-branch-4.png"
          alt="home image"
          class="home__leaf-2"
        />
      </section>

      <!--==================== ABOUT ====================-->
      <section class="about section" id="about">
        <div class="about__container container grid">
          <div class="about__data">
            <span class="section__subtitle">About Us</span>
            <h2 class="section__title about__title">
              <div>
                We Provide
                <br />
                <img src="assets/img/about-sushi-title.png" alt="about image" />
              </div>

              Healthy Food
            </h2>

            <p class="about__description">
              Food comes to us from our relatives, whether they have wings or
              roots. This is how we consider food, it also has a culture. It has
              a history that passes from generation to generation.
            </p>
          </div>

          <img
            src="assets/img/about-sushi.png"
            alt="about image"
            class="about__img"
          />
        </div>

        <img
          src="assets/img/leaf-branch-1.png"
          alt="about image"
          class="about__leaf"
        />
      </section>

      <!--==================== POPULAR ====================-->
      <section class="popular section" id="popular">
        <span class="section__subtitle">The Best Food</span>
        <h2 class="section__title">Popular Dishes</h2>

        <div
          class="popular__container container grid"
          id="popular-container"
        ></div>
      </section>

      <!--==================== RECENTLY ====================-->
      <section class="recently section" id="recently">
        <div class="recently__container container grid">
          <div class="recently__data">
            <span class="section__subtitle">Recently Added</span>
            <h2 class="section__title">
              Sushi Samurai
              <br />
              Salm√≥n Cheese
            </h2>

            <p class="recently__description">
              Take a look at what's new. And do not deprive yourself of a good
              meal, enjoy and be happy.
            </p>

            <a href="#" class="button">
              Order Now <i class="ri-arrow-right-line"></i>
            </a>

            <img
              src="assets/img/spinach-leaf.png"
              alt="recently image"
              class="recently__data-img"
            />
          </div>

          <img
            src="assets/img/recently-salmon-sushi.png"
            alt="recently image"
            class="recently__img"
          />
        </div>

        <img
          src="assets/img/leaf-branch-2.png"
          alt="recently image"
          class="recently__leaf-1"
        />
        <img
          src="assets/img/leaf-branch-3.png"
          alt="recently image"
          class="recently__leaf-2"
        />
      </section>

      <!--==================== NEWSLETTER ====================-->
      <section class="newsletter section">
        <div class="newsletter__container container">
          <div class="newsletter__content grid">
            <img
              src="assets/img/newsletter-sushi.png"
              alt="newsletter image"
              class="newsletter__img"
            />
            <div class="newsletter__data">
              <span class="section__subtitle">Newsletter</span>
              <h2 class="section__title">
                Subscribe For <br />
                Offer Updates
              </h2>

              <form action="" class="newsletter__form">
                <input
                  type="email"
                  placeholder="Enter email"
                  class="newsletter__input"
                />
                <button class="button newsletter__button">
                  Subscribe <i class="ri-send-plane-line"></i>
                </button>
              </form>
            </div>
          </div>

          <img
            src="assets/img/spinach-leaf.png"
            alt="newsletter image"
            class="newsletter__spinach"
          />
        </div>
      </section>
    </main>

    <!--==================== FOOTER ====================-->
    <footer class="footer">
      <div class="footer__container container grid">
        <div>
          <a href="#" class="footer__logo">
            <img src="assets/img/logo.png" alt="logo image" />
            Akesushi Restaurant
          </a>

          <p class="footer__description">
            Food for the body is not <br />
            enough. There must be food <br />
            for the soul.
          </p>
        </div>

        <div class="footer__content">
          <div>
            <h3 class="footer__title">Main Menu</h3>
            <ul class="footer__links">
              <li>
                <a href="#" class="footer__link">About</a>
              </li>

              <li>
                <a href="#" class="footer__link">Menus</a>
              </li>

              <li>
                <a href="#" class="footer__link">Offer</a>
              </li>

              <li>
                <a href="#" class="footer__link">Events</a>
              </li>
            </ul>
          </div>

          <div>
            <h3 class="footer__title">Information</h3>
            <ul class="footer__links">
              <li>
                <a href="#" class="footer__link">Contact</a>
              </li>

              <li>
                <a href="#" class="footer__link">Order & Returns</a>
              </li>

              <li>
                <a href="#" class="footer__link">Videos</a>
              </li>

              <li>
                <a href="#" class="footer__link">Reservation</a>
              </li>
            </ul>
          </div>

          <div>
            <h3 class="footer__title">Address</h3>
            <ul class="footer__links">
              <li class="footer__information">
                Av. Hacienda 1234 <br />
                Lima 4321, Per√∫
              </li>

              <li class="footer__information">9AM - 11PM</li>
            </ul>
          </div>

          <div>
            <h3 class="footer__title">Social Media</h3>
            <ul class="footer__social">
              <a
                href="https://www.facebook.com/"
                target="_blank"
                class="footer__social-link"
              >
                <i class="ri-facebook-circle-fill"></i>
              </a>

              <a
                href="https://www.instagram.com/"
                target="_blank"
                class="footer__social-link"
              >
                <i class="ri-instagram-fill"></i>
              </a>

              <a
                href="https://twitter.com/"
                target="_blank"
                class="footer__social-link"
              >
                <i class="ri-twitter-fill"></i>
              </a>
            </ul>
          </div>
        </div>

        <img
          src="assets/img/spring-onion.png"
          alt="footer image"
          class="footer__onion"
        />
        <img
          src="assets/img/spinach-leaf.png"
          alt="footer image"
          class="footer__spinach"
        />
        <img
          src="assets/img/leaf-branch-4.png"
          alt="footer image"
          class="footer__leaf"
        />
      </div>

      <div class="footer__info container">
        <div class="footer__card">
          <img src="assets/img/footer-card-1.png" alt="footer image" />
          <img src="assets/img/footer-card-2.png" alt="footer image" />
          <img src="assets/img/footer-card-3.png" alt="footer image" />
          <img src="assets/img/footer-card-4.png" alt="footer image" />
        </div>

        <span class="footer__copy">
          &#169; Copyright Alhadad. All rights reserved
        </span>
      </div>
    </footer>

    <!--========== SCROLL UP ==========-->
    <a href="#" class="scrollup" id="scroll-up">
      <i class="ri-arrow-up-line"></i>
    </a>

    <!----===============SCROLLREVEAL ===============-->
    <script src="assets/js/scrollreveal.min.js"></script>

    <!--=============== MAIN JS ===============-->
    <script src="assets/js/main.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        allProduct();
        cartList();
        updateCart();
      });

      /*=============== SHOW MENU ===============*/
      const navMenu = document.getElementById("nav-menu"),
        navToggle = document.getElementById("nav-toggle"),
        navClose = document.getElementById("nav-close");

      /*=============== MENU MENU ===============*/
      if (navToggle) {
        navToggle.addEventListener("click", () => {
          navMenu.classList.add("show-menu");
        });
      }

      /*=============== MENU HIDDEN ===============*/
      if (navClose) {
        navClose.addEventListener("click", () => {
          navMenu.classList.remove("show-menu");
        });
      }

      /*=============== REMOVE MENU MOBILE ===============*/
      const navLink = document.querySelectorAll(".nav__link");

      const linkAction = () => {
        const navMenu = document.getElementById("nav-menu");

        navMenu.classList.remove("show-menu");
      };
      navLink.forEach((n) => n.addEventListener("click", linkAction));

      /*=============== CHANGE BACKGROUND HEADER ===============*/
      const scrollHeader = () => {
        const header = document.getElementById("header");

        this.scrollY >= 50
          ? header.classList.add("bg-header")
          : header.classList.remove("bg-header");
      };

      window.addEventListener("scroll", scrollHeader);

      /*=============== SHOW SCROLL UP ===============*/
      const scrollUp = () => {
        const scrollUp = document.getElementById("scroll-up");

        this.scrollY >= 350
          ? scrollUp.classList.add("show-scroll")
          : scrollUp.classList.remove("show-scroll");
      };

      window.addEventListener("scroll", scrollUp);

      /*=============== SCROLL SECTIONS ACTIVE LINK ===============*/
      const sections = document.querySelectorAll("section[id");

      const scrollActive = () => {
        const scrollY = window.pageYOffset;

        sections.forEach((current) => {
          const sectionHeight = current.offsetHeight,
            sectionTop = current.offsetTop - 58,
            sectionId = current.getAttribute("id"),
            sectionClass = document.querySelector(
              ".nav__menu a[href*=" + sectionId + "]"
            );

          if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
            sectionClass.classList.add("active-link");
          } else {
            sectionClass.classList.remove("active-link");
          }
        });
      };

      window.addEventListener("scroll", scrollActive);

      /*=============== DARK LIGHT THEME ===============*/
      const themeButton = document.getElementById("theme-button");

      const getCurrentIcon = () =>
        themeButton.classList.contains(iconTheme)
          ? "ri-moon-line"
          : "ri-sun-line";

      if (selectedTheme) {
        themeButton.classList[selectedIcon === "bx bx-moon" ? "add" : "remove"](
          iconTheme
        );
      }

      themeButton.addEventListener("click", () => {
        document.body.classList.toggle(darkTheme);
        themeButton.classList.toggle(iconTheme);

        localStorage.setItem("selected-theme", getCurrentTheme());
        localStorage.setItem("selected-icon", getCurrentIcon());
      });

      /*=============== SCROLL REVEAL ANIMATION ===============*/
      sr.reveal(
        ".home__img, .newsletter__container, .footer__logo, .footer__description, .footer__content, .footer__info"
      );
      sr.reveal(".home__data", { origin: "bottom" });
      sr.reveal(".about__data, .recently__data", { origin: "left" });
      sr.reveal(".about__img, .recently__img", { origin: "right" });
      sr.reveal(".popular", { interval: "100" });

      /*=============== SHOW CART ===============*/
      const cart = document.getElementById("cart"),
        cartShop = document.getElementById("cart-shop"),
        cartClose = document.getElementById("cart-close");

      /*===== CART SHOW =====*/
      /* Validate if constant exists */
      if (cartShop) {
        cartShop.addEventListener("click", () => {
          cart.classList.add("show-cart");
        });
      }

      /*===== CART HIDDEN =====*/
      /* Validate if constant exists */
      if (cartClose) {
        cartClose.addEventListener("click", () => {
          cart.classList.remove("show-cart");
        });
      }

      function allProduct() {
        fetch("https://akesushi-admin.up.railway.app/v1/products")
          .then((response) => response.json())
          .then((data) => renderProduct(data));
      }

      function renderProduct(products) {
        let container = document.getElementById("popular-container");

        products.forEach((product) => {
          let id = product._id;
          let name = product.name;
          let description = product.subtitle;
          let price = product.price;
          let image = product.image;

          container.innerHTML += `
      <article class="popular__card">
        <img src="${image}" alt="popular image" class="popular__img">
    
        <h3 class="popular__name">${name}</h3>
        <span class="popular__description">${description}</span>
        <span class="popular__price">${priceFormat(price)}</span>
        <button class="popular__button" onclick="addToCart('${encodeURIComponent(
          JSON.stringify(product)
        )}')">
            <i class="ri-shopping-bag-line"></i>
        </button>
      </article>
    `;
        });
      }

      function cartList() {
        if (Object.keys(myCart).length != 0) {
          for (let id in myCart) {
            let item = myCart[id];

            cartContainer.innerHTML += `
        <article class="cart__card">
          <div class="cart__box">
              <img src="${item.image}" alt="" class="cart__img">
          </div>
    
          <div class="cart__details">
              <h3 class="cart__title">${item.name}</h3>
              <span class="cart__price">${priceFormat(
                item.price * item.qty
              )}</span>
    
              <div class="cart__amount">
                  <div class="cart__amount-content">
                      <span class="cart__amount-box">
                          <i class="ri-subtract-line" onclick="minCart('${id}')"></i>
                      </span>
    
                      <span class="cart__amount-number">${item.qty}</span>
    
                      <span class="cart__amount-box" onclick="plusCart('${id}')">
                          <i class="ri-add-line"></i>
                      </span>
                  </div>
    
                  <i class="ri-delete-bin-line cart__amount-trash" onclick="removeCart('${id}')"></i>
              </div>
          </div>
        </article>
      `;
          }
        }
      }

      function addToCart(product) {
        product = JSON.parse(decodeURIComponent(product));

        let id = product._id;
        let name = product.name;
        let price = product.price;
        let subtitle = product.subtitle;
        let image = product.image;

        if (id in myCart) {
          myCart[id].qty++;
        } else {
          let cartItem = {
            name: name,
            subtitle: subtitle,
            price: price,
            image: image,
            qty: 1,
          };

          myCart[id] = cartItem;
        }

        count++;
        sum += price;

        cartContainer.innerHTML = "";
        updateCart();
        cartList();
      }

      function plusCart(id) {
        if (id in myCart) {
          myCart[id].qty++;
          count++;
          sum += myCart[id].price;

          cartContainer.innerHTML = "";
          updateCart();
          cartList();
        }
      }

      function minCart(id) {
        if (id in myCart) {
          if (myCart[id].qty > 1) {
            myCart[id].qty--;
            count--;
            sum -= myCart[id].price;

            cartContainer.innerHTML = "";
            updateCart();
            cartList();
          }
        }
      }

      function removeCart(id, total) {
        if (id in myCart) {
          if (myCart[id].qty > 0) {
            count -= myCart[id].qty;
            sum -= myCart[id].qty * myCart[id].price;
            delete myCart[id];

            cartContainer.innerHTML = "";
            updateCart();
            cartList();
          }
        }
      }

      function updateCart() {
        document.getElementById("sum").textContent = priceFormat(sum);
        document.getElementById("count").textContent = count + " items";
        localStorage.setItem("sum", sum);
        localStorage.setItem("count", count);
        localStorage.setItem("myCart", JSON.stringify(myCart));
      }

      function checkout() {
        if (Object.keys(myCart).length != 0) {
          window.location.href = "/checkout.html";
        } else {
          alert("Your cart is empty, please get some item please!");
        }
      }
    </script>
  </body>
</html>
